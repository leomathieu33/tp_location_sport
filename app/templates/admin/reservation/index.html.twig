{% extends 'base.html.twig' %}

{% block title %}Liste des réservations{% endblock %}

{% block body %}
<h1>Liste des réservations</h1>

<table>
  <thead>
    <tr>
      <th>ID</th>
      <th>Début</th>
      <th>Fin</th>
      <th>Utilisateur</th>
      <th>Ville</th>
      <th>Adresse</th>
      <th>Référence Terrain</th>
      <th>Sport</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
  {% for reservation in reservations %}
    <tr>
      <td>{{ reservation.id }}</td>
      <td>{{ reservation.dateReservationDebut ? reservation.dateReservationDebut|date('d/m/Y H:i') : 'N/A' }}</td>
      <td>{{ reservation.dateReservationFin ? reservation.dateReservationFin|date('d/m/Y H:i') : 'N/A' }}</td>
      <td>{{ reservation.user ? reservation.user.email : 'N/A' }}</td>
      <td>{{ reservation.terrain ? reservation.terrain.ville : 'N/A' }}</td>
      <td>{{ reservation.terrain ? reservation.terrain.adresse : 'N/A' }}</td>
      <td>{{ reservation.terrain ? reservation.terrain.referenceTerrain : 'N/A' }}</td>
      <td>{{ reservation.terrain and reservation.terrain.sport ? reservation.terrain.sport.nomSport : 'N/A' }}</td>
      <td>
        <a href="{{ path('admin_reservation_show', {'id': reservation.id}) }}">Voir</a>
        <a href="{{ path('admin_reservation_edit', {'id': reservation.id}) }}">Modifier</a>
        <form method="post" action="{{ path('admin_reservation_delete', {'id': reservation.id}) }}" onsubmit="return confirm('Supprimer cette réservation ?');" style="display:inline-block;">
          <input type="hidden" name="_token" value="{{ csrf_token('delete' ~ reservation.id) }}">
          <button type="submit">Supprimer</button>
        </form>
      </td>
    </tr>
  {% else %}
    <tr>
      <td colspan="9">Aucune réservation trouvée.</td>
    </tr>
  {% endfor %}
  </tbody>
</table>
{% endblock %}